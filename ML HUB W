local whitelist = { 1168915031, 2002271267, 1664200351, 4473738491, 1386132671 }

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerId = player.UserId

print("Player ID detected:", playerId)

local isWhitelisted = false
for _, id in ipairs(whitelist) do
    if id == playerId then
        isWhitelisted = true
        break
    end
end

if not isWhitelisted then
    warn("Access denied for ID:", playerId)
    player:Kick("You are not allowed to use this script")
    return
end

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "ML HUB",
    LoadingTitle = "Paid Script",
    LoadingSubtitle = "By XYZ",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "ML HUB",
        FileName = "MainConfig"
    }
})

local MainTab = Window:CreateTab("Main", 4483362458)
local farmingTab = Window:CreateTab("Farm", 4483362458)

MainTab:CreateToggle({
    Name = "Destroy Ad Portals",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            for _, portal in pairs(game:GetDescendants()) do
                if portal.Name == "RobloxForwardPortals" then
                    portal:Destroy()
                end
            end
            game.DescendantAdded:Connect(function(descendant)
                if descendant.Name == "RobloxForwardPortals" then
                    descendant:Destroy()
                end
            end)
        end
    end
})

MainTab:CreateToggle({
    Name = "Background Music",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            local sound = Instance.new("Sound")
            sound.Name = "BackgroundMusic"
            sound.SoundId = "rbxassetid://5410083226"
            sound.Volume = 1
            sound.Looped = true
            sound.Parent = game.Workspace
            sound:Play()
        else
            local existing = game.Workspace:FindFirstChild("BackgroundMusic")
            if existing then existing:Destroy() end
        end
    end
})

MainTab:CreateToggle({
    Name = "FPS Boost",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            local function RemoveLag()
                for _, v in pairs(game:GetDescendants()) do
                    if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Explosion") or v:IsA("Decal") or v:IsA("Texture") then
                        v:Destroy()
                    end
                end
            end
            RemoveLag()
            task.spawn(function()
                while Value do
                    task.wait(30)
                    RemoveLag()
                end
            end)
        end
    end
})

local selectedSize = "2"
MainTab:CreateInput({
    Name = "Auto Size Input",
    PlaceholderText = "Enter size (e.g., 2)",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        selectedSize = text
    end
})

MainTab:CreateToggle({
    Name = "Auto Size Toggle",
    CurrentValue = false,
    Callback = function(Value)
        _G.AutoSize = Value
        while _G.AutoSize do
            game:GetService("ReplicatedStorage").rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", tonumber(selectedSize))
            task.wait(0.1)
        end
    end
})

local selectedSpeed = "125"
MainTab:CreateInput({
    Name = "Auto Speed Input",
    PlaceholderText = "Enter speed (e.g., 125)",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        selectedSpeed = text
    end
})

MainTab:CreateToggle({
    Name = "Auto Speed Toggle",
    CurrentValue = false,
    Callback = function(Value)
        _G.AutoSpeed = Value
        while _G.AutoSpeed do
            local char = game.Players.LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.WalkSpeed = tonumber(selectedSpeed)
            end
            task.wait()
        end
    end
})

MainTab:CreateToggle({
    Name = "NoClip",
    CurrentValue = false,
    Callback = function(Value)
        local RunService = game:GetService("RunService")
        if Value then
            getgenv().noclipConnection = RunService.Stepped:Connect(function()
                for _, part in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end)
        else
            if getgenv().noclipConnection then
                getgenv().noclipConnection:Disconnect()
            end
        end
    end
})

farmingTab:CreateToggle({
    Name = "Fast Punch",
    CurrentValue = false,
    Callback = function(toggleState)
        local player = game.Players.LocalPlayer
        local punch = player.Backpack:FindFirstChild("Punch")
        local character = game.Workspace:FindFirstChild(player.Name)
        local punch1

        if character then
            punch1 = character:FindFirstChild("Punch")
        end

        local attackTime = 0

        if punch and punch:FindFirstChild("attackTime") then
            punch.attackTime.Value = attackTime
        elseif punch1 and punch1:FindFirstChild("attackTime") then
            punch1.attackTime.Value = attackTime
        end
    end
})

farmingTab:CreateToggle({
    Name = "Ultra Fast Strength",
    CurrentValue = false,
    Callback = function(Value)
        getgenv().isGrinding = Value

        if not Value then return end

        task.spawn(function()
            while getgenv().isGrinding do
                for i = 1, 500 do
                    game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
                end
                task.wait(0.1)
            end
        end)
    end
})

farmingTab:CreateToggle({
    Name = "Fast Grind (Normal One)",
    CurrentValue = false,
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local isGrinding = true
        for i = 1, 12 do
            task.spawn(function()
                while isGrinding do
                    player.muscleEvent:FireServer("rep")
                    task.wait(0.001)
                end
            end)
        end
    end
})

farmingTab:CreateToggle({
    Name = "Fast Rebirth",
    CurrentValue = false,
    Callback = function(bool)
        fastRebirth = bool

        if fastRebirth then
            spawn(function()
                local a = game:GetService("ReplicatedStorage")
                local b = game:GetService("Players")
                local c = b.LocalPlayer

                local d = function(e)
                    local f = c.petsFolder
                    for g, h in pairs(f:GetChildren()) do
                        if h:IsA("Folder") then
                            for i, j in pairs(h:GetChildren()) do
                                a.rEvents.equipPetEvent:FireServer("unequipPet", j)
                            end
                        end
                    end
                    task.wait(.1)
                end

                local k = function(l)
                    d()
                    task.wait(.01)
                    for m, n in pairs(c.petsFolder.Unique:GetChildren()) do
                        if n.Name == l then
                            a.rEvents.equipPetEvent:FireServer("equipPet", n)
                        end
                    end
                end

                local o = function(p)
                    local q = workspace.machinesFolder:FindFirstChild(p)
                    if not q then
                        for r, s in pairs(workspace:GetChildren()) do
                            if s:IsA("Folder") and s.Name:find("machines") then
                                q = s:FindFirstChild(p)
                                if q then break end
                            end
                        end
                    end
                    return q
                end

                local t = function()
                    local u = game:GetService("VirtualInputManager")
                    u:SendKeyEvent(true, "E", false, game)
                    task.wait(.1)
                    u:SendKeyEvent(false, "E", false, game)
                end

                while fastRebirth do
                    local v = c.leaderstats.Rebirths.Value
                    local w = 10000 + (5000 * v)
                    if c.ultimatesFolder:FindFirstChild("Golden Rebirth") then
                        local x = c.ultimatesFolder["Golden Rebirth"].Value
                        w = math.floor(w * (1 - (x * 0.1)))
                    end

                    d()
                    task.wait(.1)
                    k("Swift Samurai")

                    while c.leaderstats.Strength.Value < w do
                        for y = 1, 10 do
                            c.muscleEvent:FireServer("rep")
                        end
                        task.wait()
                    end

                    d()
                    task.wait(.1)
                    k("Tribal Overlord")

                    local z = o("Jungle Bar Lift")
                    if z and z:FindFirstChild("interactSeat") then
                        c.Character.HumanoidRootPart.CFrame = z.interactSeat.CFrame * CFrame.new(0, 3, 0)
                        repeat
                            task.wait(.1)
                            t()
                        until c.Character.Humanoid.Sit
                    end

                    local A = c.leaderstats.Rebirths.Value
                    repeat
                        a.rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                        task.wait(.1)
                    until c.leaderstats.Rebirths.Value > A

                    task.wait()
                end
            end)
        end
    end
})
